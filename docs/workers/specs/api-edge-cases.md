## エッジケース処理仕様

### 1. 接続切断
- ケース:
  - ゲーム中にプレイヤーが切断
  - Ready中/待機中に切断
- GameSession DO の対応:
  - `handleDisconnect(playerId)` で
    - `players` から削除
    - ルーム人数更新
    - 必要に応じて `player_left` をブロードキャスト
  - ラウンド中のホスト切断:
    - 残りプレイヤーの中からホスト再割当 or ラウンド無効化。

### 2. タイムアウト
- 反応時間タイムアウト:
  - 既存 `GAME_TIMEOUTS` を参考に、一定時間内に反応が揃わない場合は自動で `round_result`（引き分け or 相手勝ち）を送信。
- Readyタイムアウト:
  - 長時間 Ready 状態が揃わない場合、ルームからの自動退出やキャンセルを検討（将来拡張）。

### 3. 不正メッセージ
- 想定外の `action`、必須フィールド欠如など:
  - `error` メッセージを返しつつ、処理は中断。
  - 連続する不正メッセージ送信はレート制限や切断対象。

### 4. 同時アクセス競合
- 同一ルームに対する複数の `round_start` / `join_room` が同時に来た場合:
  - DO が単一スレッドで順序保証される想定のため、最後に確定した状態のみ有効。
  - 先着/後着いずれを優先するかは DO 内のビジネスロジックで明示（ホスト以外の round_start は拒否等）。


